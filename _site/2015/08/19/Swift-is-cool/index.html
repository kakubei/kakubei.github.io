<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Swift is Actually Cool! &middot; Kakuweb Blog
    
  </title>


    <!-- This is a header with the pages_list array declared in config.yml -->
<!--
    <h3 class="masthead-title">
    <a href="/" title="Home">Kakuweb Blog</a>

    
    </h3>
-->

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-08 layout-reverse">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Hodgepodge bunch of stuff, mostly related to programming but really anything I feel like ranting about.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive/">Posts</a>
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/novel/">My Novel</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    


  <!-- listing the latest 10 entries -->
    <section>
        <span class="sidebar-nav-item">Recent Posts</span>
        <ul>
        
          <li>
            <a href="/2017/01/19/buying-a-new-videogame/">The sure-fire way to buy a new video game</a>
          </li>
        
          <li>
            <a href="/2017/01/15/back-to-work/">Back to work</a>
          </li>
        
          <li>
            <a href="/2017/01/14/move-to-london/">So you want to move to London</a>
          </li>
        
          <li>
            <a href="/2016/02/24/Tap-Gesture-and-TableView/">Using a Tap Gesture That Doesn't Interfere with a TableView in iOS</a>
          </li>
        
          <li>
            <a href="/2016/02/24/Close-iOS-Keyboard/">Best Way to Close the iOS Keyboard</a>
          </li>
        
          <li>
            <a href="/2016/02/05/Apple-Music-HipHop/">Apple Radio = The HipHop Channel</a>
          </li>
        
          <li>
            <a href="/2016/02/04/Bicycle-Wheel-Sizes/">Bicycle Wheel Sizes</a>
          </li>
        
          <li>
            <a href="/2015/08/19/Swift-is-cool/">Swift is Actually Cool!</a>
          </li>
        
          <li>
            <a href="/2015/08/19/Apple-Watch-is-a-gimmick/">The Apple Watch is a Gimmick</a>
          </li>
        
          <li>
            <a href="/2015/06/05/Irony-of-To-Do-Apps/">The Irony of To Do Apps</a>
          </li>
        
        </ul>
    </section>

    <span class="sidebar-nav-item">Currently v0.7</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2017. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Kakuweb Blog</a>
            <small>Rants and raves. Some interesting stuff, most of it not.</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Swift is Actually Cool!</h1>
  <span class="post-date">19 Aug 2015</span>
  <p>Who knew?</p>

<p>I’ve written <a href="http://kakubei.github.io/2014/11/15/swift-is-a-mess/">disparagingly about Swift in the past</a>, but as I dig deeper and deeper into the language, and with the new 2.0 version just out, I’ve come to like it more and more.</p>

<h2 id="closures">Closures</h2>

<p>Something that is really cool are closures. Closures are like mini functions that get passed as a parameter to another function. Yeah, sounds weird, I know but they’re great. They’re called <code class="highlighter-rouge">lambdas</code> in Ruby and you use them all the time without even realizing what the hell they are. They’re called <code class="highlighter-rouge">blocks </code>in other languages like Objective-C.</p>

<p>Does this look familiar?</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="sx">%w[Tony Janis Sasha Joe]</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">e</span><span class="si">}</span><span class="s2"> is my name"</span> <span class="p">}</span></code></pre></figure>

<p>This will print out:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Tony is my name
Janis is my name
Sasha is my name
Joe is my name
</code></pre>
</div>

<p>The <code class="highlighter-rouge">.map()</code> method is a great example because it actually takes a closure as its sole parameter. I bet you didn’t know that. I didn’t. I’ve been using <code class="highlighter-rouge">.map</code> for years in Ruby without knowing that what was inside of it was a lambda (closure). Studying the Swift guide has given me a much better appreciation for closures and how cool they are.</p>

<p>Take this bit of simple code for example:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="k">var</span> <span class="nv">multipliedNumbers</span><span class="p">:</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">number</span> <span class="k">in</span> <span class="n">numbers</span> <span class="p">{</span>
    <span class="n">multipliedNumbers</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">number</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">multipliedNumbers</span></code></pre></figure>

<p>Which will return <code class="highlighter-rouge">[4, 24, 14, 10]</code></p>

<p>This can be written in a single line of code with a closure like so:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">multipliedNumbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="nf">map</span><span class="p">({</span> <span class="nv">$0</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">})</span></code></pre></figure>

<p><code class="highlighter-rouge">[4, 24, 14, 10]</code></p>

<p>Isn’t that awesome?</p>

<p>But what’s going on there? It’s not as crazy as it looks.</p>

<ul>
  <li><code class="highlighter-rouge">.map()</code> takes an array and acts upon each item in the array, then it returns a new array with whatever changes we’ve made inside the <code class="highlighter-rouge">.map()</code> parentheses</li>
  <li>The <code class="highlighter-rouge">$0</code> refers to the first argument that is passed, which in the case of <code class="highlighter-rouge">.map</code> will be each item in the array, so for each item it’s doing something</li>
  <li>That something is simply multiplying the item by 2</li>
</ul>

<p>The verbose way of writing that closure is like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">multipliedNumbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="nf">map</span><span class="p">({</span> <span class="p">(</span><span class="nv">number</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span><span class="o">-&gt;</span> <span class="kt">Int</span> <span class="k">in</span> <span class="n">number</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">})</span></code></pre></figure>

<p>So you see, a closure is like a function:</p>

<ul>
  <li>it has parameters, in this case a parameter named <code class="highlighter-rouge">number</code> of type <code class="highlighter-rouge">Int</code></li>
  <li>it has a return value, another <code class="highlighter-rouge">Int</code> (<code class="highlighter-rouge">-&gt; Int</code> is how Swift declares return types)</li>
  <li>and then, instead of curly braces for the body of the function, it has the <code class="highlighter-rouge">in</code> keyword</li>
  <li>then the actual body, what we want this closure to do</li>
</ul>

<p>Since Swift is pretty good at inferring stuff, we can let it infer the parameter type, and the return type.</p>

<p>If we were to only infer the return type, it would look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">multipliedNumbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="nf">map</span><span class="p">({</span> <span class="p">(</span><span class="nv">number</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="k">in</span> <span class="n">number</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">})</span></code></pre></figure>

<p>But we let it infer both parameter type and return type and we use the <code class="highlighter-rouge">$0</code> trick to grab the first parameter without having to declare it or give it a name. The result, as we saw above is this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">multipliedNumbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="nf">map</span><span class="p">({</span> <span class="nv">$0</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">})</span></code></pre></figure>

<p>Perhaps a slightlly more readable version might be this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">multipliedNumbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">number</span> <span class="k">in</span> <span class="n">number</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span></code></pre></figure>

<p>In this case, it is much more apparent what the first (and only) parameter is and what is happening to it. It still does the same thing as the line above, but I think this is more readable, and readable code will always triumph over shorter, more cryptic code.</p>

<p>Oh, and notice that we can also omit the parentheses after the <code class="highlighter-rouge">.map</code> method and just include the closure after it inside curly braces. This is known as <code class="highlighter-rouge">trailing closures</code> and is the way Ruby uses them. Looks much nicer.</p>

<h2 id="uiview-animations">UIView Animations</h2>
<p>The animations in <code class="highlighter-rouge">UIView</code> are also a good example of closure usage.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">myView</span> <span class="o">=</span> <span class="kt">UIView</span><span class="p">()</span>
<span class="kt">UIView</span><span class="o">.</span><span class="nf">animateWithDuration</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="nv">animations</span><span class="p">:</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
    <span class="n">myView</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">completed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span> <span class="p">}</span></code></pre></figure>

<p>Here, <code class="highlighter-rouge">animations:</code> takes a closure that returns nothing (<code class="highlighter-rouge">-&gt; Void</code>) and we have another closure at the end which is the completion block.</p>

<p>Note that all the magic is happening inside the <code class="highlighter-rouge">animateWithDuration()</code> method, we are passing closures inside of it.</p>

<p>This can be further optimized by having Swift infer the return type of the <code class="highlighter-rouge">animations:</code> closure and by removing the completion block since it’s not being used, resulting in this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">myView</span> <span class="o">=</span> <span class="kt">UIView</span><span class="p">()</span>
<span class="kt">UIView</span><span class="o">.</span><span class="nf">animateWithDuration</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="nv">animations</span><span class="p">:</span> <span class="p">{</span>
    <span class="n">myView</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">)</span></code></pre></figure>

<p>Much easier to read.</p>

<p>So don’t be afraid of closures, they’re great, they just take a little getting used to.</p>

<p>Oh, and incidentally, regular functions in Swift are themselves closures! What??? True, look it up.</p>

<p>Learn more at <a href="http://www.bitfountain.io">Bitfountain courses</a>.</p>

</div>

<img src="/images/twitter_logo_blue.png" alt="Twitter" style="width: 30px; float: left; margin-right: 10px;">
<a href="https://twitter.com/intent/tweet?url=http://localhost:4000/2015/08/19/Swift-is-cool/&text=Swift is Actually Cool!&via=kakubei"
   target="_blank">Share this post </a>if you want,
or
<a href="https://twitter.com/kakubei">
  follow me on Twitter</a> if you're into that stuff.

<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'noirnovel'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2017/01/19/buying-a-new-videogame/">
            The sure-fire way to buy a new video game
            <small>19 Jan 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/01/15/back-to-work/">
            Back to work
            <small>15 Jan 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/01/14/move-to-london/">
            So you want to move to London
            <small>14 Jan 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50242492-1', 'kakubei.github.io');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>


  </body>
</html>
