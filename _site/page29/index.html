<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Kakuweb Blog &middot; Rants and raves. Some interesting stuff, most of it not.
    
  </title>


    <!-- This is a header with the pages_list array declared in config.yml -->
<!--
    <h3 class="masthead-title">
    <a href="/" title="Home">Kakuweb Blog</a>

    
    </h3>
-->

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-08 layout-reverse">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Hodgepodge bunch of stuff, mostly related to programming but really anything I feel like ranting about.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="/">Home</a>

    

    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive/">Posts</a>
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/novel/">My Novel</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    


  <!-- listing the latest 10 entries -->
    <section>
        <span class="sidebar-nav-item">Recent Posts</span>
        <ul>
        
          <li>
            <a href="/2017/01/19/buying-a-new-videogame/">The sure-fire way to buy a new video game</a>
          </li>
        
          <li>
            <a href="/2017/01/15/back-to-work/">Back to work</a>
          </li>
        
          <li>
            <a href="/2017/01/14/move-to-london/">So you want to move to London</a>
          </li>
        
          <li>
            <a href="/2016/02/24/Tap-Gesture-and-TableView/">Using a Tap Gesture That Doesn't Interfere with a TableView in iOS</a>
          </li>
        
          <li>
            <a href="/2016/02/24/Close-iOS-Keyboard/">Best Way to Close the iOS Keyboard</a>
          </li>
        
          <li>
            <a href="/2016/02/05/Apple-Music-HipHop/">Apple Radio = The HipHop Channel</a>
          </li>
        
          <li>
            <a href="/2016/02/04/Bicycle-Wheel-Sizes/">Bicycle Wheel Sizes</a>
          </li>
        
          <li>
            <a href="/2015/08/19/Swift-is-cool/">Swift is Actually Cool!</a>
          </li>
        
          <li>
            <a href="/2015/08/19/Apple-Watch-is-a-gimmick/">The Apple Watch is a Gimmick</a>
          </li>
        
          <li>
            <a href="/2015/06/05/Irony-of-To-Do-Apps/">The Irony of To Do Apps</a>
          </li>
        
        </ul>
    </section>

    <span class="sidebar-nav-item">Currently v0.7</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2017. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Kakuweb Blog</a>
            <small>Rants and raves. Some interesting stuff, most of it not.</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">

    
      <h2 class="post-title"><a href="/2017/01/19/buying-a-new-videogame/">The sure-fire way to buy a new video game</a></h2>
      <p>When your wife yells at you “Another video game? You bought another video game? We need a new sofa and you bought another fucking video game???” You hold up you hand, palm out, and in a very calm voice, your best Ted Talk voice, you say: “It’s for the kids.” Of course, it’s all bullshit, it’s not for the kids, the kids would not be allowed anywhere near such a video game. But she doesn’t know that so it mollifies... <a href="/2017/01/19/buying-a-new-videogame/">read</a> </p>
    
      <h2 class="post-title"><a href="/2017/01/15/back-to-work/">Back to work</a></h2>
      <p>So it’s that time of the year again, the new year and back to work after the Christmas holidays, chock full of new year’s resolution waiting to be dashed against the rocks of every day life and humdrum routine. Resolutions that will, inevitably, succumb, to quote the poet Ace Ventura, to the chewy chunks of degradation. I’ve been gearing myself for this return to work and the inevitable stress that comes with it, for the past two days. Mentally preparing,... <a href="/2017/01/15/back-to-work/">read</a> </p>
    
      <h2 class="post-title"><a href="/2017/01/14/move-to-london/">So you want to move to London</a></h2>
      <p>My advice: don’t! Don’t get me wrong, London is wonderful place, it is the centre of the universe, it is the most cosmopolitan and interesting city in the world (sorry New York). It has the most things to do anywhere on the planet. You could live in London your entire life and never see or do everything there is to see or do. It is the Silicon Valley of Europe. It’s also the banking capital of Europe. And it’s also... <a href="/2017/01/14/move-to-london/">read</a> </p>
    
      <h2 class="post-title"><a href="/2016/02/24/Tap-Gesture-and-TableView/">Using a Tap Gesture That Doesn't Interfere with a TableView in iOS</a></h2>
      <p>So if you’ve ever used a Tap Gesture on a whole ViewController only to find that it interferes with a TableView and now you can’t select any rows, you know how it can be a pain. The good news is that there is a really simple way to fix it. You don’t need to create any weird invisble views, etc. Just add this bit of code in viewDidLoad: tap.cancelsTouchesInView <span... <a href="/2016/02/24/Tap-Gesture-and-TableView/">read</a> </p>
    
      <h2 class="post-title"><a href="/2016/02/24/Close-iOS-Keyboard/">Best Way to Close the iOS Keyboard</a></h2>
      <p>I’m sure you’ve seen lots of different ways of closing the keyboard in iOS. One of the most popular ones seems to be to resign the first responder. And that one’s fine. But the one I like the most and I think is the simplest is to just force an end editing like so: view.endEditing(true) Put it into a function and call it from multiple places in your ViewController: <figure... <a href="/2016/02/24/Close-iOS-Keyboard/">read</a> </p>
    
      <h2 class="post-title"><a href="/2016/02/05/Apple-Music-HipHop/">Apple Radio = The HipHop Channel</a></h2>
      <p>So what’s a guy to do when Rdio shuts down? Apart from freak out and tear your hair out and then mourn and cry? What alternatives are out there? If you’re lucky to live in a country where Pandora is available, then that’s probably your first option. Not because Pandora is any good, but because they bought the last assets Rdio had to offer. If it’s not available then there’s Spotify. But I don’t really like it. The interface sucks,... <a href="/2016/02/05/Apple-Music-HipHop/">read</a> </p>
    
      <h2 class="post-title"><a href="/2016/02/04/Bicycle-Wheel-Sizes/">Bicycle Wheel Sizes</a></h2>
      <p>TL;DR Version Q. Are mountain bike wheel sizes some marketing bullshit for the brands to sell more crap? A. No. They’re not. Q. Does wheel size actually make a difference in how the bike handles? A. Yes it does. Q. But how? A. Read on. I’ve been riding bikes every since I was about 5 years old. That’s 31 years ago. Back then there was only 1 type of bike, the ol’ banana-seat bike: <img src="https://s-media-cache-ak0.pinimg.com/736x/56/67/ed/5667edd8fea45992fcdbdb472bb5a33f.jpg" alt="banana-seat" title="banana-seat bike"... <a href="/2016/02/04/Bicycle-Wheel-Sizes/">read</a> </p>
    
      <h2 class="post-title"><a href="/2015/08/19/Swift-is-cool/">Swift is Actually Cool!</a></h2>
      <p>Who knew? I’ve written disparagingly about Swift in the past, but as I dig deeper and deeper into the language, and with the new 2.0 version just out, I’ve come to like it more and more. Closures Something that is really cool are closures. Closures are like mini functions that get passed as a parameter to another function. Yeah, sounds weird, I know but they’re great. They’re called lambdas in Ruby and you use them all the... <a href="/2015/08/19/Swift-is-cool/">read</a> </p>
    
      <h2 class="post-title"><a href="/2015/08/19/Apple-Watch-is-a-gimmick/">The Apple Watch is a Gimmick</a></h2>
      <p>I’m an old Apple fan boy, but I don’t like the Apple Watch, I don’t own one and don’t want to own one. I think it’s a gimmick. What good is a timepiece that can’t fulfill its one, major, function: telling time, half the time? A timepiece that goes to sleep on you and won’t show you what time it is, one that you have to plug in every night because the damn thing’s battery won’t last even 20 hours?... <a href="/2015/08/19/Apple-Watch-is-a-gimmick/">read</a> </p>
    
      <h2 class="post-title"><a href="/2015/06/05/Irony-of-To-Do-Apps/">The Irony of To Do Apps</a></h2>
      <p>For some years now I’ve been obsessed with To Do apps. I think it’s safe to say that anyone obsessed with technology, as I am, will also be obsessed with things like To Do apps since they represent the epitome of technology’s promise: to make our lives easier. Now, I’m not talking about a grocery list in a table view, that’s easy to do, you can whip one up in a number of programming environments with not too much effort,... <a href="/2015/06/05/Irony-of-To-Do-Apps/">read</a> </p>
    
      <h2 class="post-title"><a href="/2015/03/28/The-Order/">The Order: 1886 Why All the Hate?</a></h2>
      <p>The Order: 1886 has been getting a lot of bad press lately, a lot or irate reviewers are saying you shouldn’t even play it. I really don’t understand what all the hate is about. A mini F.A.Q. Should you play The Order: 1886? Yes. You should play it. Don’t necessarily buy it, unless you have a lot of money to throw away, but definitely play it, rent it like I did or borrow it from a friend. Is... <a href="/2015/03/28/The-Order/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/11/15/swift-is-a-mess/">Swift is a Bit of a Mess</a></h2>
      <p>Apple’s new language is undoubtedly much more palatable and approachable than the dreaded Objective-C, no question about that whatsoever. Even if you’re a staunch, die-hard, crusty old Objective-C developer you have to admit that Swift is more elegant, less verbose (hell, even a 6-year-old girl is less verbose), easier to remember and, more important: easier to learn than Objective-C. It is Apple’s latest attempt at bringing a modern language to its modern Operating System. But it’s no panacea. Granted, this... <a href="/2014/11/15/swift-is-a-mess/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/10/15/ajax-and-rails/">Ajax and Rails, making it work</a></h2>
      <p>Every time I need to add some Ajax to a Rails project I need to look up documentation and search through all my earlier files to see how I did it. Maybe this is because I’m old and was doing javascript (which I hate BTW) the old-fashioned way so getting my head around the Rails way might be more difficult, I don’t know, but it’s a pain in the arse, so I’m writing a little blog post so I can... <a href="/2014/10/15/ajax-and-rails/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/09/26/Rubymotion-maintenance/">The Disappointment of Rubymotion</a></h2>
      <p>I bought Rubymotion last year in a frenzy of excitement over writing iOS apps. It cost me $200 which is a lot for an independent developer these days, especially when you consider that Xcode is free and they’ve just released Swift, a much more approachable language than the daunting and hated Objective-C. Hell I even bought the Rubymotion book by Clay Allsop in my excitement. But their website said that it was a one-time investment... <a href="/2014/09/26/Rubymotion-maintenance/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/09/14/Destiny/">Destiny is Disappointing</a></h2>
      <p>No, not the woven threads of fate, but the game by Bungie. How can it be disappointing? This was the most hyped-up game in the known universe, everybody and their dog was lined up waiting for the release, it almost reached iPhone 6 pre-release fervor! Plus, it was made by Bungie, creators of one of the best games of all times, a game whose innovations defined first-person shooters for decades. How is it possible for it to be disappointing? Why,... <a href="/2014/09/14/Destiny/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/09/07/bible-passages/">Bible passages explained in modern language</a></h2>
      <p>I’m not bashing Christianity or any other religion, believe in whatever you want, it’s your choice, you’re free to choose. I for, example, believe that my dog is my god. Think about it, we feed them, groom them, pamper them, take them for a walk, pick up their shit! Something I wouldn’t do even for my own kids, cater to their every need, stroke them, brush them, do anything for them, unconditionally. If that’s not the description of a god... <a href="/2014/09/07/bible-passages/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/07/28/simple_form-styles/">Remove div wrappers from simple_form fields</a></h2>
      <p>The simple_form gem, by default will wrap all your input fields in different div classes. This is fine to get up and running out of the box, but it can be a real pain when you want to style your inputs in ways that conflict with the default CSS. To get rid of the formatting is very simple, use f.input_field instead of f.input = f.input_field :email, label:... <a href="/2014/07/28/simple_form-styles/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/06/28/ubisoft-cant-tell-a-story/">Ubisoft Can't Tell a Story</a></h2>
      <p>It’s not that they’re not as good as Bioware or don’t have Naughty Dog’s flair for dialogue, it’s simply that they suck. They can’t tell a story to save their lives, it’s like all their writers are 13 year-old kids who’ve never read a book or seen a classic movie. Don’t believe me? Allow me to illustrate. Watchdogs Ok, the story here is so stupid and inconsequential that you’re better off skipping the cut scenes (those that will allow... <a href="/2014/06/28/ubisoft-cant-tell-a-story/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/06/20/watchdogs-review/">Watchdogs Review</a></h2>
      <p>So Watchdogs, from Ubisoft, has been out for a while and you’ve read the reviews saying how wonderful and innovative it is, etc. Well, I’m here to set the record straight and give you my unbiased Watchdogs review. The TL;DR version: Watchdogs is 75% Assassin’s Creed, 10% GTA and 5% Deus Ex. There is virtually nothing innovative or that you haven’t seen before in Watchdogs. The story and characters are dumb and you don’t give a shit about any... <a href="/2014/06/20/watchdogs-review/">read</a> </p>
    
      <h2 class="post-title"><a href="/2014/06/19/macaw/">Macaw - The Code-Savvy Design Tool</a></h2>
      <p>Update: Macaw has just launched version 1.5 and these are some of the new features: States Quickly add hover, active and focus states for any element. Seriously? In 1.5? This should have been part of 1.0! Display Toggling Take control of an element’s display and visibility properties for smart, responsive design. Once again, a 1.0 feature that was actually demoed in one of their videos but never worked. Rich Text Create and style nodes... <a href="/2014/06/19/macaw/">read</a> </p>
    

    <hr/>

    <!--
    <h1>Latest Post</h1>
  

      <div class="post">
        <h2 class="post-title">
          <a href="/2014/04/07/serving-retina-images-to-devices-that-need-them/">
            Serving Retina Images to Devices that Need them
          </a>
        </h2>

        <span class="post-date">07 Apr 2014</span>

        <h3 id="update-chrome-34-released-around-april-9-2014-is-supposed-to-have-support-for-the-srcset-attribute-read-on-to-find-out-what-that-means"><em>Update:</em> <code class="highlighter-rouge">Chrome 34</code> (released around April 9 2014) is supposed to have support for the <code class="highlighter-rouge">srcset</code> attribute. Read on to find out what that means.</h3>

<p>Retina Macs are a pain in the arse for web developers, now we have to deal with 2 sets of images for everything or run the risk of suffering the unending wrath of Retina Mac users who will invariably let you know that image X looks fuzzy on their screen. When did fuzzy images become a capital crime? And it’s not like I’m talking horrible, pixelated images, no, just a bit fuzzy which all of a sudden is completely unacceptable.</p>

<p>This is an issue that affects mainly the Macs because on the iPad and iPhone, even with Retina displays, the screen size and pixel density are such that a non-retina image is a lot less noticeable.</p>

<p>It would be interesting to figure out what percentage of our web viewers actually have a retina display Mac before we go and spend hours trying to cater to a small minority.</p>

<p>So what’s a web developer to do?</p>

<h2 id="option-1">Option 1</h2>
<p>Just serve huge images to everybody. This is the easiest thing to do, but you still need some work for things to look good on the bloody retina displays, you need to set your image width and height to half the actual size or it will still look (oh no!) <em>fuzzy</em>.</p>

<p>Here’s an example, say your image is 1024 x 960 pixels, this is how you need to present it.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"retina-image@2x.png"</span> <span class="na">width=</span><span class="s">"512"</span> <span class="na">height=</span><span class="s">"480"</span><span class="nt">&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="o">//</span> <span class="nt">with</span> <span class="nt">CSS</span>
<span class="o">&lt;</span><span class="nt">img</span> <span class="nt">src</span><span class="o">=</span><span class="s1">"retina-image@2x.png"</span> <span class="nt">style</span><span class="o">=</span><span class="s1">"width: 512px; height: 480px;"</span><span class="o">&gt;</span></code></pre></figure>

<p>Of course you want to avoid HTML attributes and inline CSS so you can create a class for it.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"retina-image@2x.png"</span> <span class="na">class=</span><span class="s">"retina-pain-in-the-arse"</span><span class="nt">&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="o">//</span> <span class="nt">CSS</span>
<span class="nc">.retina-pain-in-the-arse</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="err">//</span> <span class="err">You'll</span> <span class="err">need</span> <span class="err">some</span> <span class="err">extra,</span> <span class="err">tricky</span> <span class="err">CSS</span> <span class="err">to</span> <span class="err">get</span> <span class="err">the</span> <span class="err">image</span> <span class="err">to</span> <span class="err">display</span> <span class="err">at</span> <span class="err">the</span> <span class="err">size</span> <span class="err">you</span> <span class="err">want.</span>
<span class="p">}</span></code></pre></figure>

<p>The downside to this method is, of course, you’re serving huge images, even to the majority who don’t have a fancy new retina display.</p>

<p>And the <code class="highlighter-rouge">width: 50%</code> in the CSS won’t help you get the image at the size you want, that’s a bit tricker and you might have to do it on an individual basis which is bad news all around.</p>

<h2 id="option-2">Option 2</h2>
<p>Use Safari’s fancy new-fangled <code class="highlighter-rouge">srcset</code> tag to serve retina images. It sounds great. Supposedly webkit has this new tag where you specify the name of the retina image and the browser will only load the needed one. It’s supposed to be like this:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"normal-image.png"</span> <span class="na">srcset=</span><span class="s">"big-ass-retina-image.png 2x"</span><span class="nt">&gt;</span></code></pre></figure>

<p>Note the <code class="highlighter-rouge">2x</code> at the end of the name, no, that’s not a typo, that’s what the spec says to use. Safari is supposed to look at this and determine which image it will serve depending on the device. Sounds awesome. The best part: it will <strong>not</strong> load both images, just the one it needs to render, everybody wins.</p>

<p><strong>The bad news:</strong> this doesn’t seem to work, that is, there is no support on the main browsers for it at the moment, which is a bit strange considering that this change came out for webkit in August 2013. Safari 7 in Mavericks was supposed to have it but it doesn’t, nor does Safari for iOS 7.1 either. I read somewhere that the latest version of Chrome (or Chrmomium, the poster wasn’t too sure) supports this but in my tests with <code class="highlighter-rouge">Chrome 33.0.1750.152</code> downloaded yesterday it doesn’t work.</p>

<p>So, useless for the time being, keep it around for the future if you already changed your web pages.</p>

<p>Read the blog post <a href="https://www.webkit.org/blog/2910/improved-support-for-high-resolution-displays-with-the-srcset-image-attribute/">straight from the horses mouth</a>.</p>

<h2 id="option-3">Option 3</h2>
<p>Use Javascript to serve the retina images only for retina devices. This seems to be the best option so far (see option 2 as to why that is). We use a little javascript to overwrite the image source tag if we detect a retina device.</p>

<p>This is a javascript I stole from my brother who in turn stole it from some dude on the internet. I had to change it to actually make it work because, as usual, the code he sent me was full of errors.</p>

<p>Presented here in Coffeescript because I hate Javascript (is there an uglier modern language that javascript out there?):</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span> <span class="o">-&gt;</span>
  <span class="k">if</span> <span class="nb">window</span><span class="p">.</span><span class="nx">devicePixelRatio</span> <span class="o">&gt;</span> <span class="mi">1</span>
    <span class="nx">images</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"img"</span><span class="p">)</span>
    <span class="nx">arrayLength</span> <span class="o">=</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arrayLength</span>
      <span class="nx">imgTag</span> <span class="o">=</span> <span class="nx">images</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
      <span class="nx">attr</span> <span class="o">=</span> <span class="nx">imgTag</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"srcset"</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">attr</span>
        <span class="nx">firstToSpace</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">" "</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"attr is: "</span> <span class="o">+</span> <span class="nx">attr</span><span class="p">)</span>
        <span class="nx">imgTag</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">firstToSpace</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"And firstToSpace is: "</span> <span class="o">+</span> <span class="nx">firstToSpace</span><span class="p">)</span>
      <span class="nx">i</span><span class="o">++</span>
<span class="k">return</span></code></pre></figure>

<p>Alright, for you Javascript perverts:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">arrayLength</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">firstToSpace</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">images</span><span class="p">,</span> <span class="nx">imgTag</span><span class="p">,</span> <span class="nx">_results</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">devicePixelRatio</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">images</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">"img"</span><span class="p">);</span>
    <span class="nx">arrayLength</span> <span class="o">=</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">_results</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arrayLength</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">imgTag</span> <span class="o">=</span> <span class="nx">images</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">attr</span> <span class="o">=</span> <span class="nx">imgTag</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"srcset"</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">firstToSpace</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">" "</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"attr is: "</span> <span class="o">+</span> <span class="nx">attr</span><span class="p">);</span>
        <span class="nx">imgTag</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">firstToSpace</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"And firstToSpace is: "</span> <span class="o">+</span> <span class="nx">firstToSpace</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">_results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="o">++</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">_results</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="k">return</span><span class="p">;</span></code></pre></figure>

<p>I’ve left the console logs in there so you can see if the damn thing is working or not.</p>

<p>What it does is very simple:</p>

<p>Since we had already used the new-fangled, useless <code class="highlighter-rouge">srcset</code> tag, we leverage that to overwrite the image source, it works like this:</p>

<ol>
  <li>Checks to see if the device is a retina device based on Pixel Ratio being greater than 1</li>
  <li>then picks up all the images in the page</li>
  <li>checks to see if they have the <code class="highlighter-rouge">srcset</code> attribute</li>
  <li>if they do have the attribute, it takes the image name from that attribute,</li>
  <li>removes the space and <code class="highlighter-rouge">2x</code> at the end of the name, hence grabbing the name of the high-res image</li>
  <li>and overwrites the <code class="highlighter-rouge">src</code> attribute with this new, high-res image.</li>
</ol>

<p>Simple. The nice thing about this script is that it’s short, simple and you can leave the <code class="highlighter-rouge">srcset</code> in there for the future when the major browsers start supporting it, at which time you simply remove the call for the javascript and things should work (fingers crossed).</p>

<p>What if you don’t want to use the damn <code class="highlighter-rouge">srcset</code>? Or if you don’t, rightly, trust my Javascript skills?</p>

<p>Then your best bet is probably to use javascript written by someone who actually knows javascript, like this one right here: <a href="http://retinajs.com/">retina.js</a> which seems to be the most popular out there.</p>

<p>Downsides to both this script and the retina.js one, a couple:</p>

<ol>
  <li>The browser will load <strong>both</strong> images, making your pages take longer to load, <strong>even if you’re not serving the retina images</strong>, this sucks!</li>
  <li>Pages will be slower on <strong>all</strong> devices, this is especially bad on mobile devices which have less capable CPUs and already takes them longer to render images and pages.</li>
</ol>

<p>However, this is the best option I’ve found so far to serve retina images. If you know of something better, by all means, get in touch and let us know.</p>

<p>Cheers.</p>

      </div>

  
-->
</div>

<!-- This should go in each individual posts page not here -->
 <!--
<div class="pagination">
  
    <a class="pagination-item older" href="/page30">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page28">Newer</a>
    
  
</div>
-->

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50242492-1', 'kakubei.github.io');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>


  </body>
</html>
